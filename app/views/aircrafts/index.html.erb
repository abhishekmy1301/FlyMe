<div class="banner" style="background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url(https://businessaircraft.bombardier.com/sites/default/files/styles/interactive_visualization_tool_retina_3200_desktop/public/ivt/hotspots/backgrounds/2022-02/DDBA0713_FamilyTarmacOrlando2021_V10_6ac_4800X2512.jpg?itok=-MmrClGb);">
  <%= render "shared/navbar" %>
  <div class="landing-stats container d-flex justify-content-around align-items-center">
    <div class="p-2 flex-column text-center">
        <h1 class="h1-text-large">Global</h1>
        <h2>FLEET</h2>
    </div>
    <div class="p-2 flex-column text-center">
      <h1 class="h1-text-large"><%= @aircrafts.count %></h1>
      <h2>AIRCRAFTS</h2>
    </div>
    <div class="p-2 flex-column text-center">
      <h1 class="h1-text-large"><%= @bookings.count %></h1>
      <h2>BOOKINGS</h2>
    </div>
  </div>
</div>

<div class="container index mt-3">
  <div class="row">
    <div class="col-12">

      <h1>
        Aircraft Fleets
      </h1>

    </div>
  </div>

  <div class="row">
    <div class="col">
        <h4>Select an aircraft</h4>
    </div>
  </div>

  <%# This is card for index page %>
  <% @users_aircrafts = @aircrafts.select { |aircraft| aircraft.user == current_user } %>
  <% @other_aircrafts = @aircrafts.reject { |aircraft| aircraft.user == current_user } %>

  <div class="row">
    <% @other_aircrafts.each do |aircraft| %>
      <div class="col-md-4">
        <div class="flat-card align-items-center">
          <div class="flat-card-image" style="background-image: url('<%= aircraft.picture_url %>')"></div>
          <div class="flat-card-content">
            <div class="flat-card-title">
              <h4><%= aircraft.model %></h4>
            </div>
            <p><%= aircraft.description %></p>
            <div class="flex">
              <div class="flex align-items-center">
                <i class="fa-solid fa-people-line"></i>
                <span><%= aircraft.capacity %></span>
              </div>
              <div class="flex align-items-center ms-3">
                <i class="fa-solid fa-dollar-sign"></i>
                <span> <%= aircraft.price.round.to_fs(:delimited) %>/h</span>
              </div>
            </div>
          </div>

          <div class="flat-card-actions d-flex justify-content-end">
            <% if user_signed_in? %>
            <%= link_to "View", aircraft_path(aircraft), class: "ms-3 my-1 btn btn-primary" %>
            <% else %>
            <%= link_to "View", aircraft_path(aircraft), class: "ms-3 my-1 btn btn-primary" %>
            <% end  %>
          </div>

        </div>
      </div>
    <% end %>
  </div>

  <div class="row">
    <div class="col-12">

      <h1>
        Your Aircraft Fleets
        <% if user_signed_in? %>
        <%= link_to "+", new_aircraft_path, class: "ms-3 text-success text-decoration-none" %>
        <% end %>
        <h4>You have <%= @users_aircrafts.count %> aircrafts</h4>
      </h1>

    </div>
  </div>

  <div class="row">
    <% @users_aircrafts.each do |aircraft| %>
      <div class="col-md-4">
        <div class="flat-card align-items-center">
          <div class="flat-card-image" style="background-image: url('<%= aircraft.picture_url %>')"></div>
          <div class="flat-card-content">
            <div class="flat-card-title">
              <h4><%= aircraft.model %></h4>
            </div>
            <p><%= aircraft.description %></p>
            <div class="flex">
              <div class="flex align-items-center">
                <i class="fa-solid fa-people-line"></i>
                <span><%= aircraft.capacity %></span>
              </div>
              <div class="flex align-items-center ms-3">
                <i class="fa-solid fa-dollar-sign"></i>
                <span> <%= aircraft.price.round.to_fs(:delimited) %>/h</span>
              </div>
            </div>
          </div>

          <div class="flat-card-actions d-flex justify-content-end">
            <% if user_signed_in? %>
            <%= link_to "View", aircraft_path(aircraft), class: "ms-3 my-1 btn btn-primary" %>
            <% else %>
            <%= link_to "View", aircraft_path(aircraft), class: "ms-3 my-1 btn btn-primary" %>
            <% end  %>
          </div>

        </div>
      </div>
    <% end %>
  </div>
</div>
